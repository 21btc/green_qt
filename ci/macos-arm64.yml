.macos-arm64:
  variables:
    PREFIX: "$CI_PROJECT_DIR/depends"
    HOST: "macos"
    ARCH: "arm64"
    SHA256SUM: "shasum -a 256"
    PKG_CONFIG_PATH: "$PREFIX/lib/pkgconfig"
    CMAKE_INSTALL_PREFIX: "$PREFIX"
  cache:
    key: macos_arm64
    paths: [depends/]
  tags:
    - macos-arm64

macos-arm64:depends:
  extends:
    - .macos-arm64
    - .depends

macos-arm64:build:
  extends:
    - .macos-arm64
    - .build
  needs: ["macos-arm64:depends"]
  after_script:
    - strip green.app/Contents/MacOS/green
    - xattr -cr green.app
  artifacts:
    name: "$CI_JOB_NAME"
    paths:
      - green.app
